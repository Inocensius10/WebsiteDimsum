<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimsome Mentai - Beranda</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="gambar/logo.png" type="image/png">
    <style>
        .navbar-brand img {
            max-height: 40px; 
            width: auto; 
        }
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .main-content-wrapper {
            flex-grow: 1;
        }
        footer {
            margin-top: auto;
        }
        .hero-section .btn-light.text-dark-orange:hover {
            background-color: var(--dark-orange, #E65100); 
            color: var(--text-light, #FFFFFF) !important; 
            border-color: var(--dark-orange, #E65100);
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        /* Tombol WhatsApp Mengambang */
        .whatsapp-float-btn {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 20px;
            right: 20px;
            background-color: #25D366; /* Warna hijau WhatsApp */
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 30px; /* Ukuran ikon */
            box-shadow: 2px 2px 6px rgba(0,0,0,0.3);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none; /* Hapus garis bawah link */
            transition: background-color 0.3s ease;
        }
        .whatsapp-float-btn:hover {
            background-color: #1DA851; /* Warna hijau lebih tua saat hover */
            color: white;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="gambar/logo.png" alt="Dimsome Mentai Logo" class="d-inline-block align-top">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="produk.html">Produk</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tentang-kami.html">Tentang Kami</a>
                    </li>
                    <li class="nav-item" id="nav-login-admin">
                        <a class="nav-link" href="login.html">Login Admin</a>
                    </li>
                    <li class="nav-item" id="nav-logout-admin" style="display: none;">
                        <a class="nav-link" href="#" onclick="logoutAdmin()">Logout Admin</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main-content-wrapper">
        <header class="hero-section text-white text-center d-flex align-items-center justify-content-center" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('gambar/background.png') no-repeat center center; background-size: cover;">
            <div class="container">
                <h1 class="display-4 fw-bold">Selamat Datang di Dimsome Mentai!</h1>
                <p class="lead my-3">Nikmati kelezatan dimsum dengan saus mentai spesial kami. Dibuat dengan cinta dan bahan berkualitas!</p>
                <a href="produk.html" class="btn btn-lg btn-light text-dark-orange fw-bold">Lihat Menu Kami</a>
            </div>
        </header>

        <section id="featured-products" class="py-5">
            <div class="container">
                <h2 class="text-center mb-5 fw-bold section-title">Produk Unggulan Kami</h2>
                <div id="featured-product-list" class="row g-4 justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="card h-100 shadow-sm product-card">
                            <img src="gambar/menu1.png" class="card-img-top" alt="Dimsum Ayam Mentai" onerror="this.onerror=null;this.src='https://placehold.co/600x400/E65100/FFFFFF?text=Gambar+Error';">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title fw-bold">Dimsum Ayam Mentai</h5>
                                <p class="card-text text-muted small flex-grow-1">Dimsum ayam dengan mentai di atasnya.</p>
                                <p class="card-text fw-bold price-tag mt-2">Rp 15.000</p> 
                                <a href="#" class="btn btn-sm btn-primary-custom mt-auto align-self-start whatsapp-order-btn" data-product="Dimsum Ayam Mentai">Pesan Sekarang</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <div class="card h-100 shadow-sm product-card">
                            <img src="gambar/menu2.png" class="card-img-top" alt="Dimsum Ayam Mentai Medium" onerror="this.onerror=null;this.src='https://placehold.co/600x400/E65100/FFFFFF?text=Gambar+Error';">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title fw-bold">Dimsum Ayam Mentai Medium</h5>
                                <p class="card-text text-muted small flex-grow-1">Dimsum ayam dengan mentai di atasnya. Ini cukup kenyang karena ada 4 buah.</p>
                                <p class="card-text fw-bold price-tag mt-2">Rp 20.000</p> 
                                <a href="#" class="btn btn-sm btn-primary-custom mt-auto align-self-start whatsapp-order-btn" data-product="Dimsum Ayam Mentai Medium">Pesan Sekarang</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <div class="card h-100 shadow-sm product-card">
                            <img src="gambar/menu3.png" class="card-img-top" alt="Dimsum Ayam Mentai XL" onerror="this.onerror=null;this.src='https://placehold.co/600x400/E65100/FFFFFF?text=Gambar+Error';">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title fw-bold">Dimsum Ayam Mentai XL</h5>
                                <p class="card-text text-muted small flex-grow-1">Pasti kenyang.</p>
                                <p class="card-text fw-bold price-tag mt-2">Rp 30.000</p> 
                                <a href="#" class="btn btn-sm btn-primary-custom mt-auto align-self-start whatsapp-order-btn" data-product="Dimsum Ayam Mentai XL">Pesan Sekarang</a>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-4">
                    <a href="produk.html" class="btn btn-primary-custom">Lihat Semua Produk <i class="fas fa-arrow-right ms-2"></i></a>
                </div>
            </div>
        </section>

        <section class="py-5 bg-light-orange">
            <div class="container text-center">
                <h3 class="fw-bold mb-3">Sentuhan Personal Kami ðŸ˜‰</h3>
                <p class="lead">"Dimsum kami bukan cuma enak, tapi juga bikin nagih! Awas, sekali coba langsung jatuh cinta... sama dimsumnya, ya!"</p>
                <p>Tim Dimsome Mentai selalu siap sedia dengan senyuman (dan dimsum hangat!).</p>
            </div>
        </section>
    </div> 
    <footer class="py-4 text-white">
        <div class="container text-center">
            <p>&copy; <span id="current-year"></span> Dimsome Mentai. Semua Hak Dilindungi.</p>
            <p>Dibuat dengan <i class="fas fa-heart text-danger"></i> dan sedikit saus mentai.</p>
            <div id="firebase-user-info" class="mt-2">
                <small>User ID (Firebase): <span id="user-id-display">Loading...</span></small><br>
                <small>Status Admin: <span id="admin-status-display">Tidak Login</span></small>
            </div>
        </div>
    </footer>

    <a href="https://wa.me/62881010724010?text=Halo%2C%20saya%20ingin%20bertanya%20tentang%20Dimsome%20Mentai." class="whatsapp-float-btn" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script type="module">
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "YOUR_API_KEY", 
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        console.log("Firebase Config Used (index.html):", firebaseConfig);
        if (firebaseConfig.apiKey === "YOUR_API_KEY") {
            console.warn("PERHATIAN (index.html): Menggunakan Firebase API Key placeholder.");
        }

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'dimsomentai-app';

        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        setLogLevel('debug'); 

        let firebaseUserId = null;
        let firebaseAuthAttempted = false;
        
        async function initializeFirebaseAuth() {
            if (firebaseAuthAttempted) return;
            firebaseAuthAttempted = true;

            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                try {
                    await signInWithCustomToken(auth, __initial_auth_token);
                    return; 
                } catch (error) {
                    console.error("Error signing in with custom token (index.html): ", error);
                    if (!auth.currentUser) { /* Lanjutkan ke anonim */ } else { return; }
                }
            }
            
            if (!auth.currentUser) {
                try {
                    await signInAnonymously(auth);
                } catch (error) {
                    console.error("Error signing in anonymously (index.html): ", error);
                     if (document.getElementById('user-id-display')) document.getElementById('user-id-display').textContent = "Gagal Otentikasi Firebase";
                }
            }
        }

        onAuthStateChanged(auth, (user) => {
            const userIdDisplay = document.getElementById('user-id-display');
            if (user) {
                firebaseUserId = user.uid;
                console.log("Firebase User is signed in with UID (index.html):", firebaseUserId);
                if (userIdDisplay) userIdDisplay.textContent = firebaseUserId;
            } else {
                firebaseUserId = null;
                console.log("Firebase User is signed out (index.html).");
                if (userIdDisplay) userIdDisplay.textContent = "Belum Masuk Firebase";
                if (!firebaseAuthAttempted) {
                    initializeFirebaseAuth();
                }
            }
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            if (!auth.currentUser) {
                initializeFirebaseAuth(); 
            }
            updateAdminNav(); 
            setupWhatsAppOrderButtons(); // Panggil fungsi untuk setup tombol WhatsApp pada produk
        });

        // Fungsi untuk setup tombol WhatsApp pada kartu produk
        function setupWhatsAppOrderButtons() {
            const whatsAppOrderButtons = document.querySelectorAll('.whatsapp-order-btn');
            const phoneNumber = '62881010724010'; // Nomor WhatsApp tujuan

            whatsAppOrderButtons.forEach(button => {
                button.addEventListener('click', function(event) {
                    event.preventDefault(); // Mencegah aksi default link
                    const productName = this.dataset.product;
                    const message = `Halo, saya ingin memesan ${productName}.`;
                    const encodedMessage = encodeURIComponent(message);
                    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                    
                    window.open(whatsappUrl, '_blank'); // Buka di tab baru
                });
            });
        }

    </script>

    <script>
        function isAdminLoggedIn() {
            return sessionStorage.getItem('adminLoggedIn') === 'true';
        }

        function updateAdminNav() {
            const navLoginAdmin = document.getElementById('nav-login-admin');
            const navLogoutAdmin = document.getElementById('nav-logout-admin');
            const adminStatusDisplay = document.getElementById('admin-status-display');

            if (navLoginAdmin) navLoginAdmin.style.display = isAdminLoggedIn() ? 'none' : 'list-item';
            if (navLogoutAdmin) navLogoutAdmin.style.display = isAdminLoggedIn() ? 'list-item' : 'none';
            if (adminStatusDisplay) adminStatusDisplay.textContent = isAdminLoggedIn() ? 'Login sebagai Admin' : 'Tidak Login';
        }

        function logoutAdmin() {
            sessionStorage.removeItem('adminLoggedIn');
            updateAdminNav();
            window.location.href = 'index.html'; 
        }
        
        if(document.getElementById('current-year')) {
            document.getElementById('current-year').textContent = new Date().getFullYear();
        }

        // Fungsi toggleChat dan elemen chat popup lama sudah tidak diperlukan
    </script>
</body>
</html>
